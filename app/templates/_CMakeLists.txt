cmake_minimum_required(VERSION 3.2)
project (<%= appname %>)

set(EXT_PROJECTS_DIR ${PROJECT_SOURCE_DIR}/ext)
add_subdirectory(${EXT_PROJECTS_DIR}/gtest)

<% if (applicationType === "MPI") {%>
SET(CMAKE_C_COMPILER mpicc)
SET(CMAKE_CXX_COMPILER mpicxx)
<% } %>

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)

<% if (applicationType === "MPI") {%>
find_package(MPI REQUIRED)
<% } %>

add_subdirectory(src)

#Setup test project
set(PROJECT_TEST_NAME <%= testAppname %>)
add_subdirectory(test)

enable_testing()
add_test(test1 ${CMAKE_BINARY_DIR}/bin/${PROJECT_TEST_NAME} --gtest_color=yes)

